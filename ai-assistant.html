<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Assistant - EduMorph</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .ai-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            padding: 16px 0;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px;
        }
        
        .nav-brand {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .badge {
            background-color: #8b5cf6;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
        }
        
        .nav-menu {
            display: flex;
            justify-content: flex-end;
        }
        
        .btn-outline {
            background: none;
            border: 2px solid #8b5cf6;
            color: #8b5cf6;
            padding: 8px 16px;
            border-radius: 12px;
            text-decoration: none;
            transition: all 0.3s ease;
        }
        
        .btn-outline:hover {
            background-color: #8b5cf6;
            color: white;
        }
        
        .ai-assistant-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 24px 0;
        }
        
        .ai-header {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 24px;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .ai-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #8b5cf6 0%, #3b82f6 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
        }
        
        .ai-info {
            flex: 1;
        }
        
        .ai-info h1 {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 8px;
            color: #1f2937;
        }
        
        .ai-info p {
            font-size: 14px;
            color: #4b5563;
        }
        
        .chat-container {
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            flex: 1;
            display: flex;
            flex-direction: column;
            width: 100%;
            max-width: 800px;
        }
        
        .chat-messages {
            flex: 1;
            padding: 24px;
            overflow-y: auto;
            max-height: 400px;
        }
        
        .message {
            margin-bottom: 24px;
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }
        
        .message.user-message {
            flex-direction: row-reverse;
        }
        
        .message-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
            flex-shrink: 0;
        }
        
        .user-avatar {
            background: #f3f4f6;
            color: #374151;
        }
        
        .message-content {
            max-width: 70%;
            padding: 16px 20px;
            border-radius: 20px;
            word-wrap: break-word;
            line-height: 1.5;
        }
        
        .ai-message .message-content {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
        }
        
        .user-message .message-content {
            background: linear-gradient(135deg, #8b5cf6 0%, #3b82f6 100%);
            color: white;
        }
        
        .message-time {
            font-size: 12px;
            color: #9ca3af;
            margin-top: 8px;
        }
        
        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 16px 20px;
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 20px;
            max-width: 70px;
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #9ca3af;
            animation: typing 1.4s infinite ease-in-out;
        }
        
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        
        @keyframes typing {
            0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
            40% { transform: scale(1); opacity: 1; }
        }
        
        .chat-input-container {
            padding: 24px;
            border-top: 1px solid #e5e7eb;
        }
        
        .chat-input {
            display: flex;
            gap: 12px;
            align-items: center;
        }
        
        .chat-input input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            font-size: 16px;
            resize: none;
            min-height: 48px;
            max-height: 120px;
            line-height: 1.5;
        }
        
        .chat-input input:focus {
            outline: none;
            border-color: #8b5cf6;
        }
        
        .send-button {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            background: linear-gradient(135deg, #8b5cf6 0%, #3b82f6 100%);
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .send-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(139, 92, 246, 0.3);
        }
        
        .quick-actions {
            display: flex;
            flex-direction: column;
            gap: 12px;
            padding: 24px;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .quick-action-btn {
            background: none;
            border: 2px solid #8b5cf6;
            color: #8b5cf6;
            padding: 12px 16px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .quick-action-btn:hover {
            background-color: #8b5cf6;
            color: white;
        }
        
        .dashboard-layout {
            display: flex;
            height: 100vh;
        }
        
        .sidebar {
            width: 250px;
            background: #f3f4f6;
            border-right: 1px solid #e5e7eb;
            display: flex;
            flex-direction: column;
        }
        
        .sidebar-header {
            padding: 24px;
            background: #e5e7eb;
        }
        
        .sidebar-logo {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 24px;
            font-weight: 700;
            color: #1f2937;
        }
        
        .sidebar-nav {
            flex: 1;
            padding: 24px;
        }
        
        .nav-item {
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            color: #374151;
            padding: 8px 0;
            transition: all 0.3s ease;
        }
        
        .nav-item.active {
            background: #e5e7eb;
            color: #1f2937;
        }
        
        .nav-item:hover {
            background: #e5e7eb;
            color: #1f2937;
        }
        
        .sidebar-footer {
            padding: 24px;
            text-align: center;
        }
        
        .btn-small {
            padding: 8px 16px;
        }
        
        .main-content {
            flex: 1;
            padding: 24px;
        }
        
        @media (max-width: 768px) {
            .dashboard-layout {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                border-right: none;
                border-bottom: 1px solid #e5e7eb;
            }
            
            .main-content {
                padding: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard-layout">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">
                    <i class="fas fa-graduation-cap"></i>
                    <span>EduMorph</span>
                </div>
            </div>
            <nav class="sidebar-nav">
                <a href="dashboard.html" class="nav-item">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </a>
                <a href="courses.html" class="nav-item">
                    <i class="fas fa-book"></i>
                    <span>Courses</span>
                </a>
                <a href="ai-assistant.html" class="nav-item active">
                    <i class="fas fa-robot"></i>
                    <span>AI Assistant</span>
                </a>
                <a href="ai-recommendations.html" class="nav-item">
                    <i class="fas fa-lightbulb"></i>
                    <span>Recommendations</span>
                </a>
                <a href="ai-generator.html" class="nav-item">
                    <i class="fas fa-magic"></i>
                    <span>Content Generator</span>
                </a>
                <a href="feedback.html" class="nav-item">
                    <i class="fas fa-comment"></i>
                    <span>Feedback</span>
                </a>
                <a href="accessibility.html" class="nav-item">
                    <i class="fas fa-universal-access"></i>
                    <span>Accessibility</span>
                </a>
            </nav>
            <div class="sidebar-footer">
                <button class="btn btn-outline btn-small" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i>
                    Logout
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="ai-assistant-container">
                <header class="ai-header">
                    <div class="ai-avatar">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="ai-info">
                        <h1>EduMorph AI Assistant</h1>
                        <p>Your personal learning companion powered by artificial intelligence</p>
                    </div>
                </header>

                <div class="chat-container">
                    <div class="chat-messages" id="chat-messages">
                        <div class="message ai-message">
                            <div class="message-avatar">
                                <i class="fas fa-robot"></i>
                            </div>
                            <div class="message-content">
                                <p>Hello! I'm your AI learning assistant. I can help you with:</p>
                                <ul>
                                    <li>Answering questions about your courses</li>
                                    <li>Providing study tips and strategies</li>
                                    <li>Explaining complex concepts</li>
                                    <li>Creating personalized study plans</li>
                                    <li>Recommending learning resources</li>
                                </ul>
                                <p>What would you like to learn about today?</p>
                            </div>
                        </div>
                    </div>

                    <div class="quick-actions">
                        <button class="quick-action-btn" onclick="sendQuickMessage('Explain machine learning basics')">
                            <i class="fas fa-brain"></i>
                            Explain ML Basics
                        </button>
                        <button class="quick-action-btn" onclick="sendQuickMessage('Create a study plan for JavaScript')">
                            <i class="fas fa-calendar"></i>
                            Study Plan
                        </button>
                        <button class="quick-action-btn" onclick="sendQuickMessage('Help me with math problems')">
                            <i class="fas fa-calculator"></i>
                            Math Help
                        </button>
                        <button class="quick-action-btn" onclick="sendQuickMessage('Recommend courses for web development')">
                            <i class="fas fa-code"></i>
                            Course Recommendations
                        </button>
                    </div>

                    <div class="chat-input-container">
                        <div class="chat-input">
                            <input type="text" id="message-input" placeholder="Ask me anything about your learning...">
                            <button id="send-button" onclick="sendMessage()">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="ai-assistant.js"></script>
    <script>
        let messageCount = 0;

        function addMessage(content, isUser = false) {
            const messagesContainer = document.getElementById('chat-messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : 'ai-message'}`;
            
            const user = getFromStorage('user') || { name: 'User' };
            const avatarText = isUser ? user.name.charAt(0).toUpperCase() : '';
            const avatarClass = isUser ? 'user-avatar' : 'ai-avatar';
            const avatarIcon = isUser ? '' : '<i class="fas fa-robot"></i>';
            
            messageDiv.innerHTML = `
                <div class="message-avatar ${avatarClass}">
                    ${isUser ? avatarText : avatarIcon}
                </div>
                <div class="message-content">
                    <p>${content}</p>
                    <span class="message-time">${new Date().toLocaleTimeString()}</span>
                </div>
            `;
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            // Hide quick actions after first message
            if (messageCount === 0) {
                document.querySelector('.quick-actions').style.display = 'none';
            }
            messageCount++;
        }

        function showTypingIndicator() {
            const messagesContainer = document.getElementById('chat-messages');
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message ai-message';
            typingDiv.id = 'typingIndicator';
            
            typingDiv.innerHTML = `
                <div class="message-avatar ai-avatar">
                    <i class="fas fa-robot"></i>
                </div>
                <div class="message-content">
                    <div class="typing-indicator">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                </div>
            `;
            
            messagesContainer.appendChild(typingDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function hideTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        function generateAIResponse(userMessage) {
            const responses = [
                "That's a great question! Let me break this down for you step by step. Understanding this concept is crucial for your learning journey.",
                "I can see you're working hard on your studies. Based on your question, here's what I recommend you focus on next.",
                "Excellent! This shows you're thinking critically about the material. Let me provide some additional insights that might help.",
                "This is a common area where students need extra support. Let me explain this in a way that connects to what you already know.",
                "I love your curiosity! This topic has some fascinating applications. Here's how you can approach it systematically.",
                "That's exactly the kind of thinking that will help you succeed! Let me give you some practical strategies to master this.",
                "Great question! This concept builds on previous topics we've covered. Let me show you the connections.",
                "I can help you understand this better. Let's start with the fundamentals and work our way up to the more complex ideas."
            ];
            
            // Simple keyword-based responses
            const lowerMessage = userMessage.toLowerCase();
            
            if (lowerMessage.includes('study') || lowerMessage.includes('tips')) {
                return "Here are some effective study strategies: 1) Use active recall by testing yourself regularly, 2) Space out your learning sessions, 3) Create mind maps to visualize connections, 4) Teach concepts to others, and 5) Take regular breaks to maintain focus.";
            }
            
            if (lowerMessage.includes('math') || lowerMessage.includes('calculus') || lowerMessage.includes('algebra')) {
                return "Mathematics is all about understanding patterns and relationships. Start with the fundamentals, practice regularly, and don't be afraid to make mistakes - they're part of the learning process! Would you like me to explain a specific mathematical concept?";
            }
            
            if (lowerMessage.includes('science') || lowerMessage.includes('physics') || lowerMessage.includes('chemistry')) {
                return "Science is fascinating because it helps us understand how the world works! The key is to connect theoretical concepts with real-world examples. Try to visualize processes and ask 'why' and 'how' questions. What specific science topic interests you?";
            }
            
            if (lowerMessage.includes('progress') || lowerMessage.includes('track')) {
                return "Tracking your progress is essential for effective learning! I recommend: 1) Set specific, measurable goals, 2) Keep a learning journal, 3) Take regular self-assessments, 4) Celebrate small wins, and 5) Review and adjust your study plan regularly.";
            }
            
            if (lowerMessage.includes('practice') || lowerMessage.includes('problems')) {
                return "Practice is crucial for mastering any subject! I can help you create practice problems tailored to your current level. What subject would you like to practice? I can generate questions that gradually increase in difficulty.";
            }
            
            // Default response
            return responses[Math.floor(Math.random() * responses.length)];
        }

        function sendMessage() {
            const input = document.getElementById('message-input');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Add user message
            addMessage(message, true);
            input.value = '';
            
            // Show typing indicator
            showTypingIndicator();
            
            // Simulate AI response delay
            setTimeout(() => {
                hideTypingIndicator();
                const response = generateAIResponse(message);
                addMessage(response, false);
            }, 1000 + Math.random() * 2000);
        }

        function sendQuickMessage(message) {
            document.getElementById('message-input').value = message;
            sendMessage();
        }

        function logout() {
            localStorage.removeItem('user');
            window.location.href = 'login.html';
        }

        // Auto-resize textarea
        function autoResize() {
            const textarea = document.getElementById('message-input');
            textarea.style.height = 'auto';
            textarea.style.height = Math.min(textarea.scrollHeight, 120) + 'px';
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            const messageInput = document.getElementById('message-input');
            
            // Enter to send (Shift+Enter for new line)
            messageInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });
            
            // Auto-resize textarea
            messageInput.addEventListener('input', autoResize);
            
            // Check if user is logged in
            const user = getFromStorage('user');
            if (!user) {
                window.location.href = 'login.html';
            }
        });

        function getFromStorage(key) {
            return JSON.parse(localStorage.getItem(key));
        }
    </script>
</body>
</html>
